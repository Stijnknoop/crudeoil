name: Daily Crude Oil Trading Run FEB

# Bepaalt WANEER de actie draait
on:
  workflow_dispatch: # 1. Handmatige knop in GitHub Actions tab
  schedule:
    - cron: '0 2 * * *' # 2. Elke nacht om 02:00 UTC (automatisch)

jobs:
  run-trading-script:
    runs-on: ubuntu-latest
    
    # Geef de runner toestemming om bestanden te pushen naar de repo
    permissions:
      contents: write

    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4
        with:
          # Zorgt ervoor dat we de hele history hebben om over te schrijven
          fetch-depth: 0 

      - name: ğŸ Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10' # Goede stabiele versie voor Pandas/Numpy

      - name: ğŸ“¦ Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pandas numpy matplotlib requests pytz

      - name: ğŸš€ Run Trading Script
        env:
          # Hier laadt het script je GITHUB_TOKEN in vanuit de ingebouwde secrets
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        # LET OP: Verander 'main.py' hieronder naar de echte naam van jouw Python bestand!
        run: python main.py 

      - name: ğŸ’¾ Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ğŸ“Š Automatische update: Trading log & grafieken"
          # Welke bestanden hij moet pushen. Dit pakt alles in je output map.
          file_pattern: 'OIL_CRUDE/FEB_STRATEGY/Trading_details/*'
          # LET OP: Verander dit naar 'master' als jouw hoofdbranch master heet in plaats van main
          branch: main
